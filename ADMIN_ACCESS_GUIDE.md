# 관리자 메뉴 접근 가이드

## 🔐 관리자 메뉴 접근 방법

### 1. 헤더에서 접근
1. 로그인 상태에서 헤더 우측 상단의 **"관리자"** 버튼 클릭
2. 관리자 권한이 있으면 관리자 대시보드로 이동
3. 권한이 없으면 "관리자 권한이 필요한 페이지입니다" 메시지 표시

### 2. URL로 직접 접근 (권한 필요)
현재는 라우팅이 없으므로 헤더 메뉴를 통해서만 접근 가능합니다.

---

## 🛡️ 관리자 권한 설정 방법

### Firestore에서 관리자 추가

1. **Firebase 콘솔 접속**
   - https://console.firebase.google.com/project/booksalon-2301f/firestore

2. **`admins` 컬렉션 생성 (없다면)**
   - Firestore → 데이터 탭
   - 컬렉션 시작 → 컬렉션 ID: `admins`

3. **관리자 문서 추가**
   - 문서 ID: 사용자의 `uid` (Firebase Auth의 사용자 ID)
   - 필드 추가:
     ```
     role: "admin" (문자열)
     createdAt: (타임스탬프, 현재 시간)
     ```

### 예시: 관리자 추가

**문서 ID**: `사용자의_uid`
**필드**:
- `role`: `admin` (또는 `moderator`)
- `createdAt`: 현재 시간 (타임스탬프)

### 사용자 UID 확인 방법

1. **Firebase 콘솔에서 확인**
   - Authentication → 사용자 탭
   - 사용자 목록에서 UID 확인

2. **앱에서 확인**
   - 브라우저 개발자 도구 콘솔 열기
   - 로그인 후 `localStorage` 또는 콘솔에서 확인

---

## 📋 관리자 대시보드 기능

### 1. 대시보드 탭
- **KPI 카드**: 총 사용자, 포럼, 게시물, 대기 중인 신고 수
- **활동 추이 차트**: 기간별 활동 통계 (7일/30일/90일)
- **인기 포럼 TOP 10**: 인기 포럼 목록
- **인기 게시글 TOP 10**: 인기 게시글 목록

### 2. 사용자 관리 탭
- 사용자 목록 조회
- 사용자 비활성화/활성화
- 사용자 정보 확인

### 3. 포럼 관리 탭
- 포럼 목록 조회
- 포럼 삭제
- 포럼 정보 확인

### 4. 신고 관리 탭
- 신고 목록 조회
- 신고 상태 변경 (대기 → 해결)
- 신고 상세 정보 확인

---

## 🔧 관리자 권한 확인 로직

```typescript
// Firestore 경로: /admins/{userId}
// 문서 데이터: { role: "admin" }
```

**권한 확인**:
- `AdminService.isAdmin(userId)`: `admins/{userId}` 문서가 존재하고 `role === 'admin'`인지 확인
- `AdminService.isModerator(userId)`: `role === 'admin'` 또는 `role === 'moderator'`인지 확인

---

## ⚠️ 주의사항

1. **보안**: 관리자 권한은 Firestore 보안 규칙으로 보호됩니다
2. **초기 설정**: 첫 관리자는 Firebase 콘솔에서 직접 추가해야 합니다
3. **권한 확인**: 관리자 대시보드 접근 시 자동으로 권한을 확인합니다

---

## 🚀 빠른 시작

### 1단계: 사용자 UID 확인
```bash
# Firebase 콘솔 → Authentication → 사용자
# 또는 앱에서 로그인 후 개발자 도구에서 확인
```

### 2단계: Firestore에 관리자 추가
```
컬렉션: admins
문서 ID: {사용자_UID}
필드:
  - role: "admin"
  - createdAt: (현재 시간)
```

### 3단계: 관리자 메뉴 접근
1. 앱에서 로그인
2. 헤더 우측 상단 "관리자" 버튼 클릭
3. 관리자 대시보드 확인

---

**작성일**: 2025-01-27  
**상태**: 관리자 메뉴 접근 방법 안내 완료

